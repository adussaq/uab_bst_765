!function(){"use strict";var t=function(t,r){var o=0,n=0,a=0,h=0,u=0,e=t.length-1,i=new Array(r);for(o=0;e>o;o++){for(h=o,n=o+1;e>n;n++)Math.abs(t[o][n])>Math.abs(t[o][h])&&(h=n);for(a=o;e+1>a;a++)u=t[a][o],t[a][o]=t[a][h],t[a][h]=u;for(n=o+1;e>n;n++)for(a=e;a>=o;a--)t[a][n]-=t[a][o]*t[o][n]/t[o][o]}for(n=e-1;n>=0;n--){for(u=0,a=n+1;e>a;a++)u+=t[a][n]*i[a];i[n]=(t[e][n]-u)/t[n][n]}return i},r={linear:function(t){for(var r=[0,0,0,0,0],o=0,n=[];o<t.length;o++)t[o][1]&&(r[0]+=t[o][0],r[1]+=t[o][1],r[2]+=t[o][0]*t[o][0],r[3]+=t[o][0]*t[o][1],r[4]+=t[o][1]*t[o][1]);for(var a=(o*r[3]-r[0]*r[1])/(o*r[2]-r[0]*r[0]),h=r[1]/o-a*r[0]/o,u=0,e=t.length;e>u;u++){var i=[t[u][0],t[u][0]*a+h];n.push(i)}var f="y = "+Math.round(100*a)/100+"x + "+Math.round(100*h)/100;return{equation:[a,h],points:n,string:f}},exponential:function(t){var r=[0,0,0,0,0,0],o=0,n=[];for(i=t.length;i>o;o++)t[o][1]&&(r[0]+=t[o][0],r[1]+=t[o][1],r[2]+=t[o][0]*t[o][0]*t[o][1],r[3]+=t[o][1]*Math.log(t[o][1]),r[4]+=t[o][0]*t[o][1]*Math.log(t[o][1]),r[5]+=t[o][0]*t[o][1]);for(var a=r[1]*r[2]-r[5]*r[5],h=Math.pow(Math.E,(r[2]*r[3]-r[5]*r[4])/a),u=(r[1]*r[4]-r[5]*r[3])/a,e=0,i=t.length;i>e;e++){var f=[t[e][0],h*Math.pow(Math.E,u*t[e][0])];n.push(f)}var l="y = "+Math.round(100*h)/100+"e^("+Math.round(100*u)/100+"x)";return{equation:[h,u],points:n,string:l}},logarithmic:function(t){var r=[0,0,0,0],o=0,n=[];for(e=t.length;e>o;o++)t[o][1]&&(r[0]+=Math.log(t[o][0]),r[1]+=t[o][1]*Math.log(t[o][0]),r[2]+=t[o][1],r[3]+=Math.pow(Math.log(t[o][0]),2));for(var a=(o*r[1]-r[2]*r[0])/(o*r[3]-r[0]*r[0]),h=(r[2]-a*r[0])/o,u=0,e=t.length;e>u;u++){var i=[t[u][0],h+a*Math.log(t[u][0])];n.push(i)}var f="y = "+Math.round(100*h)/100+" + "+Math.round(100*a)/100+" ln(x)";return{equation:[h,a],points:n,string:f}},power:function(t){var r=[0,0,0,0],o=0,n=[];for(e=t.length;e>o;o++)t[o][1]&&(r[0]+=Math.log(t[o][0]),r[1]+=Math.log(t[o][1])*Math.log(t[o][0]),r[2]+=Math.log(t[o][1]),r[3]+=Math.pow(Math.log(t[o][0]),2));for(var a=(o*r[1]-r[2]*r[0])/(o*r[3]-r[0]*r[0]),h=Math.pow(Math.E,(r[2]-a*r[0])/o),u=0,e=t.length;e>u;u++){var i=[t[u][0],h*Math.pow(t[u][0],a)];n.push(i)}var f="y = "+Math.round(100*h)/100+"x^"+Math.round(100*a)/100;return{equation:[h,a],points:n,string:f}},polynomial:function(r,o){"undefined"==typeof o&&(o=2);for(var n=[],a=[],h=[],u=0,e=0,i=0,f=o+1;f>i;i++){for(var l=0,M=r.length;M>l;l++)r[l][1]&&(u+=Math.pow(r[l][0],i)*r[l][1]);n.push(u),u=0;for(var g=[],p=0;f>p;p++){for(var l=0,M=r.length;M>l;l++)r[l][1]&&(e+=Math.pow(r[l][0],i+p));g.push(e),e=0}a.push(g)}a.push(n);for(var s=t(a,f),i=0,M=r.length;M>i;i++){for(var v=0,d=0;d<s.length;d++)v+=s[d]*Math.pow(r[i][0],d);h.push([r[i][0],v])}for(var w="y = ",i=s.length-1;i>=0;i--)w+=i>1?Math.round(100*s[i])/100+"x^"+i+" + ":1==i?Math.round(100*s[i])/100+"x + ":Math.round(100*s[i])/100;return{equation:s,points:h,string:w}},lastvalue:function(t){for(var r=[],o=null,n=0;n<t.length;n++)t[n][1]?(o=t[n][1],r.push([t[n][0],t[n][1]])):r.push([t[n][0],o]);return{equation:[o],points:r,string:""+o}}},o=function(t,o,n){return"string"==typeof t?r[t](o,n):void 0};"undefined"!=typeof exports?module.exports=o:window.regression=o}();