!function(){"use strict";var n,t,a,r,e,o,i,h,s,u={};self.onmessage=function(n){var t,a,i,s,u,d=[];for(t=n.data.data,a=n.data.straps,s=n.data.p_val,u=n.data.p_val2,i=0;a>i;i+=1)d.push(r(e(t)));self.postMessage({start:n.data.start,CI:o(d,s,u,r(t.map(function(n){return n+h()})))})},e=function(n){var t,a=[];for(t=0;t<n.length;t+=1)a.push(n[Math.floor(Math.random()*n.length)]+h());return a},t=function(n,t){return n-t},a=function(n,t){return n+t},r=function(r){var e,o,i,h,s,u;return o=r.reduce(a)/r.length,e=r.sort(t),i=n(e),h=Math.floor((e.length+1)/2),s=n(e.slice(0,h)),u=n(e.slice(h)),{mean:o,Q1:s,Q2:i,Q3:u}},n=function(n){var t,a=n.length;if(a%2===0){var r=a/2,e=r-1;t=(n[r]+n[e])/2}else t=n[Math.floor(a/2)];return t},h=function(){return.1*(Math.random()-.5)},o=function(r,e,o){var h,s,u,d=Object.keys(r[0]),m={};for(h=0;h<d.length;h+=1)u=i(d[h]),s=r.map(u),s=s.sort(t),m[d[h]]={mean:s.reduce(a)/s.length,median:n(s),CI_min:s[Math.round(s.length*e/2)],CI_max:s[Math.round(s.length*(1-e/2))]},o&&(m[d[h]].CI2_min=s[Math.round(s.length*o/2)-1],m[d[h]].CI2_max=s[Math.round(s.length*(1-o/2))-1]);return m},s=function(n,t,r){var e,o,i,h,s,d,m;for(e=n.length,o=0;e>o&&n[o]<t;)o+=1;return i=n[o]===t?(o+.5)/e:o/e,d=u.norm.inv(i,0,1),m=u.norm.inv(r/2,0,1),h=u.norm.dist(2*d+m,0,1,!0),s=u.norm.dist(2*d-m,0,1,!0),{originStat:t,position:i,adjusted_pvals:[h,s],CI_min:n[Math.max(Math.round(e*h)-1,0)],CI_max:n[Math.min(Math.round(e*s)-1,e-1)],median:n[Math.round(e*(s+h)/2)-1],mean:n.reduce(a)/e}},i=function(n){return function(t){return t[n]}},u.norm={},u.norm.dist=function(n,t,a,r){r="undefined"==typeof r?!0:r;var e=[];if(isNaN(n)&&e.push("norm.dist: the x value "+n+" is not a number"),isNaN(t)&&e.push("norm.dist: the mean "+t+" is not a number"),isNaN(a)&&e.push("norm.dist: the standard deviation "+a+" is not a number"),e.length>0)throw new Error(e.join("; "));var o,i,h=(n-t)/a/Math.sqrt(2),s=h,u=h,d=2e-10,m=1,l=1e3;if(r===!0){do o=u,s*=-1*Math.pow(h,2)*(2*m-1)/(m*(2*m+1)),u+=s,m++;while(Math.abs((u-o)/u)>d&&l>m);var f=2/Math.sqrt(Math.PI)*u;i=Math.abs(f)>1&&n>t||1/0===Math.abs(f)?1:Math.abs(f)>1&&t>n?0:.5*(1+f)}else i=1/(a*Math.sqrt(2*Math.PI))*Math.pow(Math.E,-1/(2*Math.pow(a,2))*Math.pow(n-t,2));return i},u.norm.inv=function(n,t,a){var r=[];if(1e-10>=n?n=1e-10:n>=1-1e-10&&(n=1-1e-10),isNaN(n)&&r.push("norm.inv: the probability "+n+" is not a number"),(n>1||0>n)&&r.push("norm.inv: the probability "+n+" should be between 0 and 1 including the bounds"),isNaN(t)&&r.push("norm.inv: the mean "+t+" is not a number"),isNaN(a)&&r.push("norm.inv: the standard deviation "+a+" is not a number"),!isNaN(a)&&0>a&&r.push("norm.inv: the standard deviation "+a+" should be positive"),r.length>0)throw new Error(r.join("; "));var e,o,i=1e-10,h=1e3,s=.25,d=1.2,m=.5,l=0,f=1,M=1;e=.5>n?-.5:n>.5?.5:0;do o=n-u.norm.dist(e,0,1,!0),f=o>0?1:0>o?-1:0,s*=M*o>0?d:m,e+=f*s,M=o,l++;while(Math.abs(o)>i&&h>l);return e*a+t}}();