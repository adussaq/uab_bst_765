!function(){"use strict";var t,n,a,r,e,o,i,s,h,u={};self.onmessage=function(t){var n,a,i,h,u,d=[];for(n=t.data.data,a=t.data.straps,h=t.data.p_val,u=t.data.p_val2,i=0;a>i;i+=1)d.push(r(e(n)));self.postMessage({start:t.data.start,CI:o(d,h,u,r(n.map(function(t){return t+s()})))})},e=function(t){var n,a=[];for(n=0;n<t.length;n+=1)a.push(t[Math.floor(Math.random()*t.length)]+s());return a},n=function(t,n){return t-n},a=function(t,n){return t+n},r=function(r){var e,o,i,s,h,u;return o=r.reduce(a)/r.length,e=r.sort(n),i=t(e),s=Math.floor((e.length+1)/2),h=t(e.slice(0,s)),u=t(e.slice(s)),{mean:o,Q1:h,Q2:i,Q3:u}},t=function(t){var n,a=t.length;if(a%2===0){var r=a/2,e=r-1;n=(t[r]+t[e])/2}else n=t[Math.floor(a/2)];return n},s=function(){return.1*(Math.random()-.5)},o=function(r,e,o,s){var u,d,m,l,v=Object.keys(r[0]),f={};for(u=0;u<v.length;u+=1)m=i(v[u]),d=r.map(m),d=d.sort(n),f[v[u]]={mean:d.reduce(a)/d.length,median:t(d),CI_min:d[Math.round(d.length*e/2)],CI_max:d[Math.round(d.length*(1-e/2))],BiasCorrect:h(d,s[v[u]],e)},o&&(f[v[u]].CI2_min=d[Math.round(d.length*o/2)-1],f[v[u]].CI2_max=d[Math.round(d.length*(1-o/2))-1],l=h(d,s[v[u]],o),f[v[u]].BiasCorrect.CI2_min=l.CI_min,f[v[u]].BiasCorrect.CI2_max=l.CI_max,f[v[u]].BiasCorrect.adjusted_pvals2=l.adjusted_pvals);return f},h=function(t,n,r){var e,o,i,s,h,d,m;for(e=t.length,o=0;e>o&&t[o]<n;)o+=1;return i=t[o]===n?(o+.5)/e:o/e,d=u.norm.inv(i,0,1),m=u.norm.inv(r/2,0,1),s=u.norm.dist(2*d+m,0,1,!0),h=u.norm.dist(2*d-m,0,1,!0),{originStat:n,position:i,adjusted_pvals:[s,h],CI_min:t[Math.max(Math.round(e*s)-1,0)],CI_max:t[Math.min(Math.round(e*h)-1,e-1)],median:t[Math.round(e*(h+s)/2)-1],mean:t.reduce(a)/e}},i=function(t){return function(n){return n[t]}},u.norm={},u.norm.dist=function(t,n,a,r){r="undefined"==typeof r?!0:r;var e=[];if(isNaN(t)&&e.push("norm.dist: the x value "+t+" is not a number"),isNaN(n)&&e.push("norm.dist: the mean "+n+" is not a number"),isNaN(a)&&e.push("norm.dist: the standard deviation "+a+" is not a number"),e.length>0)throw new Error(e.join("; "));var o,i,s=(t-n)/a/Math.sqrt(2),h=s,u=s,d=2e-10,m=1,l=1e3;if(r===!0){do o=u,h*=-1*Math.pow(s,2)*(2*m-1)/(m*(2*m+1)),u+=h,m++;while(Math.abs((u-o)/u)>d&&l>m);var v=2/Math.sqrt(Math.PI)*u;i=Math.abs(v)>1&&t>n||1/0===Math.abs(v)?1:Math.abs(v)>1&&n>t?0:.5*(1+v)}else i=1/(a*Math.sqrt(2*Math.PI))*Math.pow(Math.E,-1/(2*Math.pow(a,2))*Math.pow(t-n,2));return i},u.norm.inv=function(t,n,a){var r=[];if(1e-10>=t?t=1e-10:t>=1-1e-10&&(t=1-1e-10),isNaN(t)&&r.push("norm.inv: the probability "+t+" is not a number"),(t>1||0>t)&&r.push("norm.inv: the probability "+t+" should be between 0 and 1 including the bounds"),isNaN(n)&&r.push("norm.inv: the mean "+n+" is not a number"),isNaN(a)&&r.push("norm.inv: the standard deviation "+a+" is not a number"),!isNaN(a)&&0>a&&r.push("norm.inv: the standard deviation "+a+" should be positive"),r.length>0)throw new Error(r.join("; "));var e,o,i=1e-10,s=1e3,h=.25,d=1.2,m=.5,l=0,v=1,f=1;e=.5>t?-.5:t>.5?.5:0;do o=t-u.norm.dist(e,0,1,!0),v=o>0?1:0>o?-1:0,h*=f*o>0?d:m,e+=v*h,f=o,l++;while(Math.abs(o)>i&&s>l);return e*a+n}}();